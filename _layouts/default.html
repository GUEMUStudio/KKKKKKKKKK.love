<!DOCTYPE html>
<html lang="{{ page.lang | default: 'en' }}">

<!-- 引入头部元素 -->
{%- include head.html -%}

<body a="{{ site.theme_config.appearance | default: 'auto' }}">

    <main class="page-content" aria-label="Content">
        <div class="w">

            <!-- 如果存在 header_img，显示为头图 -->
            {% if page.header_img %}
            <img src="{{ page.header_img }}" alt="Header Image" class="header-img">
            {% endif %}

            <!-- 替换 img src 为 lazyload 的 data-src -->
            {% assign content = content | replace: '<img src', '<img class="lazyload" data-src' %}
            
            <!-- 主要内容 -->
            {{ content }}

            <!-- 如果存在 footer_img，显示为底图 -->
            {% if page.footer_img %}
            <img class="lazyload footer-img" data-src="{{ page.footer_img }}" alt="Footer Image">
            {% endif %}

        </div>
    </main>

    <!-- 如果配置了 goat_counter 并且在生产环境下，引入 goat_counter -->
    {%-if site.goat_counter and jekyll.environment == "production"-%}
    {%-include goat_counter.html-%}
    {%-endif-%}

    <!-- 如果存在 custom_js，循环引入 JavaScript 文件 -->
    {% if page.custom_js %}
    {% for js_file in page.custom_js %}
    <script type="text/javascript" src="{{ site.baseurl }}/assets/js/{{ js_file }}.js"></script>
    {% endfor %}
    {% endif %}

    <script>
        // 配置 lazySizes
        window.lazySizesConfig = window.lazySizesConfig || {}; // 初始化 lazySizes 配置对象
        window.lazySizesConfig.expand = 800; // 视口加载距离
    </script>
    <!-- 加载 lazySizes 插件 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js" async></script>

</body>

</html>
